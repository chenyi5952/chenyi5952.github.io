import{r as b}from"./http-cffe2822.js";import{_ as M,a as s,r as q,o as G,b as o,c as D,e as S,f,g as e,u as _,y as I,i as p,w as l,E as g,t as R,A as J,p as K,l as O}from"./index-96b49db5.js";function Q(d){return b({url:"/center/pageGet",method:"get",params:d})}function X(d){return b({url:"/center/add",method:"post",data:d})}function Y(d){return b({url:"/center/update",method:"put",data:d})}function Z(d){return b({url:"/center/delete",method:"delete",data:d})}const ee=d=>(K("data-v-a83b6032"),d=d(),O(),d),te={class:"WH0"},ae={class:"WH11 colorw1 btp-left edgeDisInter BSR sp14",style:{position:"relative"}},le=ee(()=>f("span",{class:"commonFont"},"中心名称   ",-1)),ne={class:"fromRight-11"},oe={class:"WH12 colorw1 marginT-2 overFlowH edgeDisInter BSR sp14"},de={key:0},se={key:1},ie={align:"center"},re={class:"marginT fromRight"},ue={class:"dialog-footer"},ce={__name:"index",setup(d){s();let E=s([]),B=s();s();let v=s(),h=s();s();let w=s(),u=s({name:"",index:""});s();let i=s(!1),x=q({name:"",size:"10",page:"1"});const r=()=>{let a={name:h.value,size:x.size,page:x.page};Q(a).then(n=>{B.value=n.data.data.count,E.value=n.data.data.centers})},z=a=>{x.size=a,r()},F=a=>{x.page=a,r()},C=(a,n,c)=>{if(a=="add")i.value=!0,w.value="新增中心",u.value={name:""},v.value="add";else if(a=="delete"){let m={_id:c._id,name:c.name,index:c.index};Z(m).then(y=>{y.data.code==200?(g.success(y.data.message),r()):(g.error(y.data.message),r())})}else a=="edit"&&(i.value=!0,w.value="编辑中心",u.value={_id:c._id,name:c.name,index:c.index},v.value="edit")},H=()=>{if(!u.value.name){g.error("中心名称不能为空");return}v.value=="add"?X(u.value).then(a=>{a.data.code==200?(g.success(a.data.message),r()):(g.error(a.data.message),r())}):v.value=="edit"&&Y(u.value).then(a=>{a.data.code==200?(g.success(a.data.message),r()):(g.error(a.data.message),r())}),i.value=!1,u.value={name:"",code:"",Topic:"",type:""}};return G(()=>{r()}),(a,n)=>{const c=o("el-input"),m=o("el-button"),y=o("Plus"),k=o("el-icon"),V=o("el-table-column"),P=o("EditPen"),T=o("Delete"),$=o("el-table"),A=o("el-pagination"),L=o("el-divider"),N=o("el-form-item"),U=o("el-form"),W=o("el-dialog");return D(),S("div",te,[f("div",ae,[le,f("div",null,[e(c,{modelValue:_(h),"onUpdate:modelValue":n[0]||(n[0]=t=>I(h)?h.value=t:h=t),class:"selectwidth"},null,8,["modelValue"])]),p("     "),e(m,{type:"primary",onClick:r},{default:l(()=>[p("查询")]),_:1}),f("div",ne,[e(m,{type:"primary",onClick:n[1]||(n[1]=t=>C("add"))},{default:l(()=>[e(k,null,{default:l(()=>[e(y)]),_:1}),p("新增中心")]),_:1})])]),f("div",oe,[e($,{data:_(E),style:{height:"94%"},"header-cell-class-name":"table_header","row-style":{fontSize:"14px",height:"10px"},"cell-style":{padding:"14px",height:"30px"}},{default:l(()=>[e(V,{label:"中心编号",width:"width",align:"center"},{default:l(t=>[p(R(t.row.index),1)]),_:1}),e(V,{label:"中心名称",width:"width",align:"center"},{default:l(t=>[t.row.name?(D(),S("div",de,R(t.row.name),1)):(D(),S("div",se,R("--")))]),_:1}),e(V,{label:"操作",align:"center",width:"230"},{default:l(t=>[f("div",ie,[e(m,{text:"",type:"primary",onClick:j=>C("edit",t.$index,t.row)},{default:l(()=>[e(k,null,{default:l(()=>[e(P)]),_:1}),p("编辑")]),_:2},1032,["onClick"]),e(m,{text:"",type:"primary",onClick:j=>C("delete",t.$index,t.row)},{default:l(()=>[e(k,null,{default:l(()=>[e(T)]),_:1}),p("删除")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),f("div",re,[e(A,{"page-size":10,background:"",layout:"total, prev, pager, next, jumper",total:_(B),onSizeChange:z,onCurrentChange:F},null,8,["total"])])]),e(W,{modelValue:_(i),"onUpdate:modelValue":n[4]||(n[4]=t=>I(i)?i.value=t:i=t),title:_(w),width:"20%","align-center":"",style:{height:"220px"}},{footer:l(()=>[f("span",ue,[e(m,{onClick:n[3]||(n[3]=t=>I(i)?i.value=!1:i=!1)},{default:l(()=>[p("取消")]),_:1}),e(m,{type:"primary",onClick:H},{default:l(()=>[p(" 确认 ")]),_:1})])]),default:l(()=>[e(L,{style:{margin:"5px 0 15px 0"}}),e(U,{"label-width":"100px",model:_(u),style:{"max-width":"90%"},class:J(_(v)=="add"?"addclass":"editclass")},{default:l(()=>[e(N,{label:"中心名称",prop:"name"},{default:l(()=>[e(c,{modelValue:_(u).name,"onUpdate:modelValue":n[2]||(n[2]=t=>_(u).name=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","class"])]),_:1},8,["modelValue","title"])])}}},pe=M(ce,[["__scopeId","data-v-a83b6032"]]);export{pe as default};
