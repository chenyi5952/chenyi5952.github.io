import{r as E}from"./http-cffe2822.js";import{a as i,b as u,c as m,e as D,g as e,w as a,n as p,v as K,f as w,t as L,i as k,u as t,y as B,F as M,q as P,T as Q,z as X,E as V,o as Y}from"./index-96b49db5.js";function Z(){return E({url:"/menu/get",method:"get"})}function O(f){return E({url:"/menu/getFa",method:"post",data:f})}function N(f){return E({url:"/menu/add",method:"post",data:f})}function z(f){return E({url:"/menu/update",method:"put",data:f})}function ee(f){return E({url:"/menu/delete",method:"delete",data:f})}const ae={key:0},le={key:1},te={align:"center"},oe={class:"dialog-footer"},ne={name:"regionTableTemplate"},de=Object.assign(ne,{props:{tableData:{type:Array,required:!0},showHeader:{type:Boolean,default:!0},getData:{type:Function,required:!0}},setup(f){i(),i([]),i();let v=i();i(),i();let y=i(),I=i();i();let _=i({name:"",code:"",faId:""});i();let d=i(!1);const c=()=>{R.getData()},h=(r,n,o)=>{if(r=="addFa")d.value=!0,y.value="新增根菜单",_.value={name:"",code:"",faId:""},v.value="addFa";else if(r=="addch")O({_id:"",name:"",code:"",faId:""}).then(b=>{I.value=b.data.data.menus}),d.value=!0,y.value="新增子菜单",_.value={name:"",code:"",faId:o.menu._id},v.value="addch";else if(r=="delete"){let g={_id:o.menu._id,name:o.menu.name,code:o.menu.code,faId:o.menu.faId,chId:o.menu.chId};ee(g).then(b=>{b.data.code==200?(V.success(b.data.message),c()):(V.error(b.data.message),c())})}else if(r=="edit"){let g={_id:o.menu._id,name:"",code:"",faId:""};O(g).then(b=>{I.value=b.data.data.menus}),I.value.push({_id:"000000000000000000000000",name:"null",code:"",faId:"",chId:[],index:null}),console.log("options",I.value),d.value=!0,y.value="编辑菜单",_.value={_id:o.menu._id,name:o.menu.name,code:o.menu.code,faId:o.menu.faId,chId:o.menu.chId,index:o.menu.index},v.value="edit"}},A=()=>{v.value=="addFa"?N(_.value).then(r=>{r.data.code==200?(V.success(r.data.message),c()):(V.error(r.data.message),c())}):v.value=="addch"?N(_.value).then(r=>{r.data.code==200?(V.success(r.data.message),c()):(V.error(r.data.message),c())}):v.value=="edit"&&z(_.value).then(r=>{r.data.code==200?(V.success(r.data.message),c()):(V.error(r.data.message),c())}),d.value=!1,_.value={name:"",code:"",faId:""}},R=f,j=(r,n)=>r.row.children&&r.row.children.length>0?"":"hide-expand";return(r,n)=>{const o=u("regionTableTemplate"),g=u("el-table-column"),b=u("Plus"),x=u("el-icon"),C=u("el-button"),q=u("EditPen"),$=u("Delete"),F=u("el-table"),H=u("el-divider"),U=u("el-input"),T=u("el-form-item"),S=u("el-option"),s=u("el-select"),G=u("el-form"),J=u("el-dialog");return m(),D("div",null,[e(F,{data:f.tableData,class:"table-sub",ref:"regionTable","show-header":f.showHeader,"row-class-name":j,getData:f.getData},{default:a(()=>[e(g,{type:"expand"},{default:a(l=>[l.row.children?(m(),p(o,{key:0,tableData:l.row.children,showHeader:!1},null,8,["tableData"])):K("",!0)]),_:1}),e(g,{label:"菜单名称",width:"width",align:"center"},{default:a(l=>[w("div",null,L(l.row.menu.name),1)]),_:1}),e(g,{label:"设备ID",width:"width",align:"center"},{default:a(l=>[l.row.menu.code?(m(),D("div",ae,L(l.row.menu.code),1)):(m(),D("div",le,L("--")))]),_:1}),e(g,{label:"操作",align:"center",width:"width"},{default:a(l=>[w("div",te,[e(C,{text:"",type:"primary",disabled:!!l.row.menu.code,onClick:W=>h("addch",l.$index,l.row)},{default:a(()=>[e(x,null,{default:a(()=>[e(b)]),_:1}),k("添加子菜单")]),_:2},1032,["disabled","onClick"]),e(C,{text:"",type:"primary",onClick:W=>h("edit",l.$index,l.row)},{default:a(()=>[e(x,null,{default:a(()=>[e(q)]),_:1}),k("编辑")]),_:2},1032,["onClick"]),e(C,{text:"",type:"primary",onClick:W=>h("delete",l.$index,l.row)},{default:a(()=>[e(x,null,{default:a(()=>[e($)]),_:1}),k("删除")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data","show-header","getData"]),(m(),p(X,{to:"body"},[e(Q,{name:"fade"},{default:a(()=>[e(J,{modelValue:t(d),"onUpdate:modelValue":n[6]||(n[6]=l=>B(d)?d.value=l:d=l),title:t(y),width:"40%","align-center":"",style:{height:"50%"}},{footer:a(()=>[w("span",oe,[e(C,{onClick:n[5]||(n[5]=l=>B(d)?d.value=!1:d=!1)},{default:a(()=>[k("取消")]),_:1}),e(C,{type:"primary",onClick:A},{default:a(()=>[k(" 确认 ")]),_:1})])]),default:a(()=>[e(H),e(G,{"label-width":"100px",model:t(_),style:{"max-width":"700px"}},{default:a(()=>[e(T,{label:"菜单名称",prop:"name"},{default:a(()=>[e(U,{modelValue:t(_).name,"onUpdate:modelValue":n[0]||(n[0]=l=>t(_).name=l)},null,8,["modelValue"])]),_:1}),t(v)=="edit"||t(v)=="addch"?(m(),p(T,{key:0,label:"设备ID",prop:"code"},{default:a(()=>[e(U,{modelValue:t(_).code,"onUpdate:modelValue":n[1]||(n[1]=l=>t(_).code=l)},null,8,["modelValue"])]),_:1})):(m(),p(T,{key:1,label:"设备ID",prop:"code"},{default:a(()=>[e(U,{modelValue:t(_).code,"onUpdate:modelValue":n[2]||(n[2]=l=>t(_).code=l),disabled:""},null,8,["modelValue"])]),_:1})),t(v)=="edit"?(m(),p(T,{key:2,label:"父节点",prop:"faId"},{default:a(()=>[e(s,{modelValue:t(_).faId,"onUpdate:modelValue":n[3]||(n[3]=l=>t(_).faId=l),clearable:""},{default:a(()=>[(m(!0),D(M,null,P(t(I),l=>(m(),p(S,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):(m(),p(T,{key:3,label:"父节点",prop:"faId"},{default:a(()=>[e(s,{modelValue:t(_).faId,"onUpdate:modelValue":n[4]||(n[4]=l=>t(_).faId=l),clearable:"",disabled:""},{default:a(()=>[(m(!0),D(M,null,P(t(I),l=>(m(),p(S,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}))]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1})]))])}}});const ue={class:"WH0"},se={class:"WH11 colorw1 btp-left edgeDisInter BSR sp14",style:{position:"relative"}},ie={style:{position:"absolute",left:"100px"}},re={class:"WH12 colorw1 marginT-2 overFlowH edgeDisInter BSR sp14"},me={id:"ops-region-wrapper"},_e={class:"ops-list-wrapper"},ce={class:"marginT fromRight"},pe={class:"dialog-footer"},ge={__name:"index1",setup(f){i();let v=i();i();let y=i();i(),i();let I=i(),_=i();i();let d=i({name:"",code:"",faId:""});i();let c=i(!1);const h=()=>{Z().then(n=>{v.value=n.data.data,console.log("sfibnasiduyf",v.value)})},A=n=>{payLoad.size=n,h()},R=n=>{payLoad.page=n,h()},j=(n,o,g)=>{n=="addFa"&&(c.value=!0,I.value="新增根菜单",d.value={name:"",code:"",faId:""},y.value="addFa")},r=()=>{y.value=="addFa"&&N(d.value).then(n=>{n.data.code==200?(V.success(n.data.message),h()):(V.error(n.data.message),h())}),c.value=!1,d.value={name:"",code:"",faId:""}};return Y(()=>{h()}),(n,o)=>{const g=u("Plus"),b=u("el-icon"),x=u("el-button"),C=u("el-pagination"),q=u("el-divider"),$=u("el-input"),F=u("el-form-item"),H=u("el-option"),U=u("el-select"),T=u("el-form"),S=u("el-dialog");return m(),D("div",ue,[w("div",se,[w("div",ie,[e(x,{type:"primary",onClick:o[0]||(o[0]=s=>j("addFa"))},{default:a(()=>[e(b,null,{default:a(()=>[e(g)]),_:1}),k("新增根菜单")]),_:1})])]),w("div",re,[w("div",me,[w("div",_e,[e(de,{tableData:t(v),showHeader:!0,getData:h},null,8,["tableData"]),w("div",ce,[e(C,{"page-size":11,background:"",layout:"total, prev, pager, next, jumper",total:n.total,onSizeChange:A,onCurrentChange:R},null,8,["total"])]),e(S,{modelValue:t(c),"onUpdate:modelValue":o[7]||(o[7]=s=>B(c)?c.value=s:c=s),title:t(I),width:"40%","align-center":"",style:{height:"50%"}},{footer:a(()=>[w("span",pe,[e(x,{onClick:o[6]||(o[6]=s=>B(c)?c.value=!1:c=!1)},{default:a(()=>[k("取消")]),_:1}),e(x,{type:"primary",onClick:r},{default:a(()=>[k(" 确认 ")]),_:1})])]),default:a(()=>[e(q),e(T,{"label-width":"100px",model:t(d),style:{"max-width":"700px"}},{default:a(()=>[e(F,{label:"菜单名称",prop:"name"},{default:a(()=>[e($,{modelValue:t(d).name,"onUpdate:modelValue":o[1]||(o[1]=s=>t(d).name=s)},null,8,["modelValue"])]),_:1}),t(y)=="edit"||t(y)=="addch"?(m(),p(F,{key:0,label:"设备ID",prop:"code"},{default:a(()=>[e($,{modelValue:t(d).code,"onUpdate:modelValue":o[2]||(o[2]=s=>t(d).code=s)},null,8,["modelValue"])]),_:1})):(m(),p(F,{key:1,label:"设备ID",prop:"code"},{default:a(()=>[e($,{modelValue:t(d).code,"onUpdate:modelValue":o[3]||(o[3]=s=>t(d).code=s),disabled:""},null,8,["modelValue"])]),_:1})),t(y)=="edit"?(m(),p(F,{key:2,label:"父节点",prop:"faId"},{default:a(()=>[e(U,{modelValue:t(d).faId,"onUpdate:modelValue":o[4]||(o[4]=s=>t(d).faId=s),clearable:""},{default:a(()=>[(m(!0),D(M,null,P(t(_),s=>(m(),p(H,{key:s._id,label:s.name,value:s._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):(m(),p(F,{key:3,label:"父节点",prop:"faId"},{default:a(()=>[e(U,{modelValue:t(d).faId,"onUpdate:modelValue":o[5]||(o[5]=s=>t(d).faId=s),clearable:"",disabled:""},{default:a(()=>[(m(!0),D(M,null,P(t(_),s=>(m(),p(H,{key:s._id,label:s.name,value:s._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}))]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])])])])}}};export{ge as default};
