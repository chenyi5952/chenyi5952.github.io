import{d as b,r as x,a as v,o as k,b as n,c as V,e as j,f as t,u as l,t as H,g as o,w as c,h as f,i as L,F as N,E as u,j as W,k as K,p as z,l as C,_ as F}from"./index-96b49db5.js";import{g as U}from"./project-675fe2ee.js";import{r as B}from"./http-cffe2822.js";import{u as D}from"./index-8725779b.js";function E(s){return B({url:"/login",method:"post",data:s})}const P=s=>(z("data-v-511aecdf"),s=s(),C(),s),M=P(()=>t("div",{style:{position:"absolute",width:"100vw",height:"100vh"},class:"bgImg1"},null,-1)),q={class:"WH btp",style:{position:"relative","z-index":"9999"}},A={class:"WH1 sp0"},R={class:"WH2 btp"},T={class:"largeFont btp"},G=["src"],J={class:"WH3 btp-top"},O={class:"WH4"},Q={class:"WH5"},X={class:"WH5"},Y=b({__name:"login",setup(s){D();let a=x({account:"",password:""}),r=v(),i=v();const _=d=>{m()},I=async()=>{await U({page:1,size:1,url:8401}).then(e=>{e.data.code==200&&(r.value=e.data.data.projects[0].image,i.value=e.data.data.projects[0].name,localStorage.setItem("projectLogo",r.value),localStorage.setItem("projectName",i.value))})},m=()=>{let d={account:a.account,password:a.password};if(a.account==""||a.password==""){u.error("账号或密码不能为空");return}E(d).then(e=>{e.data.code==200?(u.success("登陆成功"),localStorage.setItem("token",e.data.data.token),W.set("token",e.data.data.token),localStorage.setItem("userImg",e.data.data.user.avatar),localStorage.setItem("userSex",e.data.data.user.sex),localStorage.setItem("userName",e.data.data.user.name),localStorage.setItem("userPhone",e.data.data.user.phone),localStorage.setItem("userRoleName",e.data.data.role.name),localStorage.setItem("userId",e.data.data.user.id),localStorage.setItem("userAccount",e.data.data.user.account),K.replace("/homePage")):e.data.message=="登录失败"&&u.error(e.data.data)})};return k(()=>{I()}),(d,e)=>{const S=n("User"),g=n("el-icon"),h=n("el-input"),w=n("Lock"),y=n("el-button");return V(),j(N,null,[M,t("div",q,[t("div",A,[t("div",R,[t("div",T,[t("img",{src:l(r),alt:"logo",class:"logo",style:{height:"50px","margin-right":"20px"}},null,8,G),t("div",null,H(l(i)),1)])]),t("div",J,[t("div",O,[t("div",Q,[o(h,{clearable:"",size:"large",modelValue:l(a).account,"onUpdate:modelValue":e[0]||(e[0]=p=>l(a).account=p),onKeyup:f(_,["enter"])},{prepend:c(()=>[o(g,null,{default:c(()=>[o(S)]),_:1})]),_:1},8,["modelValue","onKeyup"])]),t("div",X,[o(h,{clearable:"","show-password":"",size:"large",modelValue:l(a).password,"onUpdate:modelValue":e[1]||(e[1]=p=>l(a).password=p),onKeyup:f(_,["enter"])},{prepend:c(()=>[o(g,null,{default:c(()=>[o(w)]),_:1})]),_:1},8,["modelValue","onKeyup"])]),o(y,{onClick:m},{default:c(()=>[L("登录")]),_:1})])])])])],64)}}});const ae=F(Y,[["__scopeId","data-v-511aecdf"]]);export{ae as default};
