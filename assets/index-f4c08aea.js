import{r as H}from"./http-cffe2822.js";import{_ as J,m as K,a as y,r as O,x as L,o as Q,b as h,c as o,e as v,f as _,g as x,u as a,y as T,i as f,v as V,n as b,w as i,F as q,q as D,t as k,p as X,l as Y}from"./index-96b49db5.js";function Z(s){return H({url:"/dtu/get",method:"get",params:s})}function $(s){return H({url:"/cems/get",method:"get",params:s})}function ee(s){return H({url:"/report/get",method:"get",params:s})}const ae=s=>(X("data-v-b9f7ac53"),s=s(),Y(),s),te={class:"WH0"},le={class:"WH11 colorw1 btp-left edgeDisInter BSR sp14"},oe=ae(()=>_("span",{class:"commonFont"},"时间   ",-1)),ne={key:0},ue={class:"WH12 colorw1 marginT-2 overFlowH edgeDisInter BSR sp14"},se={key:0},re={key:1},de={class:"marginT fromRight"},ce={__name:"index",setup(s){let r=K(),d=y([]),c=y([]),n=y("0"),z=y(),p=y([]),S=y(10),C=y(1),M=[{label:"实时",value:"0"},{label:"分钟",value:"1"},{label:"小时",value:"2"},{label:"天",value:"3"}],U=[{label:"实时",value:"0"},{label:"15分钟",value:"1"},{label:"小时实时",value:"2"},{label:"小时均值",value:"3"}],g=O({page:"1",size:"10",interval:"",code:"",start:"",end:""});L(()=>r.query.code,t=>{c.value=[],p.value=[],console.log("111",c.value),r.query.code=t,n.value="0",d.value[0]="",d.value[1]="",I()}),L(()=>n.value,t=>{n.value=t});const E=(t,l)=>{const w=new Map;l.forEach(u=>{u.value=Number(u.value).toFixed(2),w.set(u.key,u)});const m=[];return t.forEach(u=>{w.has(u.key)?m.push(w.get(u.key)):m.push({name:u.key,value:"--"})}),m},B=async()=>{d.value==null&&(d.value=["",""]);let t={page:g.page,size:g.size,interval:n.value,code:r.query.code,start:d.value[0],end:d.value[1]};r.query.type=="dtu"?await Z(t).then(l=>{z.value=l.data.data.count,c.value=l.data.data.data}):r.query.type=="cems"?await $(t).then(l=>{z.value=l.data.data.count,c.value=l.data.data.data}):r.query.type=="report"&&await ee(t).then(l=>{z.value=l.data.data.count,c.value=l.data.data.data})},I=async()=>{S.value=10,C.value=1,g.page="1",g.size="10",await B(),p.value=c.value[0].data},W=t=>{g.size=t,g.page="1",S.value=t,C.value=1,B()},j=t=>{g.page=t,C.value=t,B()};return Q(()=>{I()}),(t,l)=>{const w=h("el-date-picker"),m=h("el-option"),u=h("el-select"),A=h("el-button"),R=h("el-table-column"),P=h("el-table"),G=h("el-pagination");return o(),v("div",te,[_("div",le,[oe,_("div",null,[x(w,{modelValue:a(d),"onUpdate:modelValue":l[0]||(l[0]=e=>T(d)?d.value=e:d=e),type:"daterange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",size:t.size},null,8,["modelValue","size"])]),f("        "),_("div",null,[a(r).query.type=="dtu"||a(r).query.type=="cems"?(o(),v("span",ne,"时间粒度")):V("",!0),f("   "),a(r).query.type=="dtu"?(o(),b(u,{key:1,modelValue:a(n),"onUpdate:modelValue":l[1]||(l[1]=e=>T(n)?n.value=e:n=e),class:"selectwidth"},{default:i(()=>[(o(!0),v(q,null,D(a(U),e=>(o(),b(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):V("",!0),a(r).query.type=="cems"?(o(),b(u,{key:2,modelValue:a(n),"onUpdate:modelValue":l[2]||(l[2]=e=>T(n)?n.value=e:n=e),class:"selectwidth"},{default:i(()=>[(o(!0),v(q,null,D(a(M),e=>(o(),b(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):V("",!0)]),f("     "),x(A,{type:"primary",onClick:I},{default:i(()=>[f("查询")]),_:1})]),_("div",ue,[x(P,{data:a(c),style:{height:"94%"},"header-cell-class-name":"table_header","row-style":{fontSize:"14px",height:"10px"},"cell-style":{padding:"14px",height:"57px"}},{default:i(()=>[x(R,{label:"时间",width:"200px",align:"center",fixed:""},{default:i(e=>[e.row.createTime?(o(),v("div",se,k(e.row.createTime.slice(5,16)),1)):(o(),v("div",re,k("--")))]),_:1}),a(p).length<9?(o(!0),v(q,{key:0},D(a(p),(e,F)=>(o(),b(R,{width:"width",align:"center"},{header:i(()=>[_("div",null,k(e.key),1)]),default:i(N=>[f(k(E(a(p),a(c)[N.$index].data)[F].value),1)]),_:2},1024))),256)):V("",!0),a(p).length>=9?(o(!0),v(q,{key:1},D(a(p),(e,F)=>(o(),b(R,{width:"200px",align:"center"},{header:i(()=>[_("div",null,k(e.key),1)]),default:i(N=>[f(k(E(a(p),a(c)[N.$index].data)[F].value),1)]),_:2},1024))),256)):V("",!0)]),_:1},8,["data"]),_("div",de,[x(G,{"page-size":a(S),"current-page":a(C),background:"",layout:"total, sizes,prev, pager, next, jumper",total:a(z),onSizeChange:W,onCurrentChange:j},null,8,["page-size","current-page","total"])])])])}}},ve=J(ce,[["__scopeId","data-v-b9f7ac53"]]);export{ve as default};
