import{g as H,a as Y,d as Z,c as ee,u as te}from"./group-6bd2387c.js";import{_ as ae,a as s,r as le,o as oe,b as n,c as b,e as R,f as _,g as t,u as d,y as k,i as r,w as a,E as m,F as L,q as P,t as B,p as ne,l as de,n as A}from"./index-96b49db5.js";import"./http-cffe2822.js";const N=x=>(ne("data-v-8501719f"),x=x(),de(),x),se={class:"WH0"},ie={class:"WH11 colorw1 btp-left edgeDisInter BSR sp14",style:{position:"relative"}},ue=N(()=>_("span",{class:"commonFont"},"分组名称   ",-1)),re=N(()=>_("span",{class:"commonFont"},"所属中心   ",-1)),ce={class:"fromRight-11"},pe={class:"WH12 colorw1 marginT-2 overFlowH edgeDisInter BSR sp14"},_e={align:"center"},me={class:"marginT fromRight"},ge={class:"dialog-footer"},fe={__name:"index",setup(x){s();let E=s([]),U=s();s();let w=s(),v=s(),h=s(),D=s(),S=s(),i=s({name:"",center:""});s();let c=s(!1),V=le({name:"",id:"",size:"10",page:"1"});const p=()=>{let o={name:v.value,id:h.value,size:V.size,page:V.page};Y(o).then(l=>{U.value=l.data.data.count,E.value=l.data.data.groups}),H().then(l=>{S.value=l.data.data})},T=o=>{V.size=o,p()},W=o=>{V.page=o,p()},F=(o,l,u)=>{if(o=="add")c.value=!0,D.value="新增分组",i.value={name:"",center:""},w.value="add";else if(o=="delete"){let y={_id:u.group._id,name:u.group.name,index:u.group.index,center:u.group.center};console.log("aisyfosahdfouuyqwa",y),Z(y).then(g=>{g.data.code==200?(m.success(g.data.message),p()):(m.error(g.data.message),p())})}else o=="edit"&&(c.value=!0,D.value="编辑分组",i.value={_id:u.group._id,name:u.group.name,index:u.group.index,center:u.group.center},w.value="edit")},$=()=>{if(!i.value.name){m.error("请完整填写信息");return}w.value=="add"?ee(i.value).then(o=>{o.data.code==200?(m.success(o.data.message),p()):(m.error(o.data.message),p())}):w.value=="edit"&&te(i.value).then(o=>{o.data.code==200?(m.success(o.data.message),p()):(m.error(o.data.message),p())}),c.value=!1,i.value={name:"",center:""}};return oe(()=>{p(),H()}),(o,l)=>{const u=n("el-input"),y=n("el-option"),g=n("el-select"),f=n("el-button"),j=n("Plus"),I=n("el-icon"),C=n("el-table-column"),q=n("EditPen"),M=n("Delete"),z=n("el-table"),J=n("el-pagination"),K=n("el-divider"),G=n("el-form-item"),O=n("el-form"),Q=n("el-dialog");return b(),R("div",se,[_("div",ie,[ue,_("div",null,[t(u,{modelValue:d(v),"onUpdate:modelValue":l[0]||(l[0]=e=>k(v)?v.value=e:v=e),class:"selectwidth"},null,8,["modelValue"])]),r("     "),re,_("div",null,[t(g,{modelValue:d(h),"onUpdate:modelValue":l[1]||(l[1]=e=>k(h)?h.value=e:h=e),clearable:"",class:"selectwidth"},{default:a(()=>[(b(!0),R(L,null,P(d(S),e=>(b(),A(y,{key:e._id,label:e.name,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),r("         "),t(f,{type:"primary",onClick:p},{default:a(()=>[r("查询")]),_:1}),_("div",ce,[t(f,{type:"primary",onClick:l[2]||(l[2]=e=>F("add"))},{default:a(()=>[t(I,null,{default:a(()=>[t(j)]),_:1}),r("新增分组")]),_:1})])]),_("div",pe,[t(z,{data:d(E),style:{height:"94%"},"header-cell-class-name":"table_header","row-style":{fontSize:"14px",height:"10px"},"cell-style":{padding:"14px",height:"30px"}},{default:a(()=>[t(C,{label:"分组编号",width:"width",align:"center"},{default:a(e=>[r(B(e.row.group.index),1)]),_:1}),t(C,{label:"分组名称",width:"width",align:"center"},{default:a(e=>[r(B(e.row.group.name),1)]),_:1}),t(C,{label:"所属中心",width:"width",align:"center"},{default:a(e=>[r(B(e.row.center),1)]),_:1}),t(C,{label:"操作",align:"center",width:"230"},{default:a(e=>[_("div",_e,[t(f,{text:"",type:"primary",onClick:X=>F("edit",e.$index,e.row)},{default:a(()=>[t(I,null,{default:a(()=>[t(q)]),_:1}),r("编辑")]),_:2},1032,["onClick"]),t(f,{text:"",type:"primary",onClick:X=>F("delete",e.$index,e.row)},{default:a(()=>[t(I,null,{default:a(()=>[t(M)]),_:1}),r("删除")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),_("div",me,[t(J,{"page-size":10,background:"",layout:"total, prev, pager, next, jumper",total:d(U),onSizeChange:T,onCurrentChange:W},null,8,["total"])])]),t(Q,{modelValue:d(c),"onUpdate:modelValue":l[6]||(l[6]=e=>k(c)?c.value=e:c=e),title:d(D),width:"20%","align-center":"",style:{height:"260px"}},{footer:a(()=>[_("span",ge,[t(f,{onClick:l[5]||(l[5]=e=>k(c)?c.value=!1:c=!1)},{default:a(()=>[r("取消")]),_:1}),t(f,{type:"primary",onClick:$},{default:a(()=>[r(" 确认 ")]),_:1})])]),default:a(()=>[t(K,{style:{margin:"5px 0 15px 0"}}),t(O,{"label-width":"100px",model:d(i),style:{"max-width":"90%"}},{default:a(()=>[t(G,{label:"分组名称",prop:"name"},{default:a(()=>[t(u,{modelValue:d(i).name,"onUpdate:modelValue":l[3]||(l[3]=e=>d(i).name=e)},null,8,["modelValue"])]),_:1}),t(G,{label:"所属中心",prop:"type"},{default:a(()=>[t(g,{modelValue:d(i).center,"onUpdate:modelValue":l[4]||(l[4]=e=>d(i).center=e),clearable:""},{default:a(()=>[(b(!0),R(L,null,P(d(S),e=>(b(),A(y,{key:e._id,label:e.name,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},be=ae(fe,[["__scopeId","data-v-8501719f"]]);export{be as default};
