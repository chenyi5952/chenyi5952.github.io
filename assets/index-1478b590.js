import{g as q,d as K,c as Q,u as X}from"./project-675fe2ee.js";import"./http-cffe2822.js";import"./minio-js-42aedebc.js";import{u as Y}from"./index-8725779b.js";import{_ as Z,a as m,r as ee,B as te,o as ae,b as n,c as k,e as I,f as _,g as e,u as i,y as z,i as v,w as l,E as c,n as le,p as oe,l as ne}from"./index-96b49db5.js";const se=h=>(oe("data-v-210887d0"),h=h(),ne(),h),de={class:"WH0"},ie={class:"WH11 colorw1 btp-left edgeDisInter BSR sp14",style:{position:"relative"}},re=se(()=>_("span",{class:"commonFont"},"端口号   ",-1)),ue={class:"fromRight-11"},ce={class:"WH12 colorw1 marginT-2 overFlowH edgeDisInter BSR sp14"},pe={align:"center"},me={class:"marginT fromRight"},_e=["src"],ge={class:"dialog-footer"},ve={__name:"index",setup(h){Y();let D=m([]),f=m(),A=m(),r=m(),s=m(),C=m(),y=m();m();let w=ee({name:"",size:"10",page:"1"}),d=m();const O=te(()=>({Authorization:localStorage.getItem("token")})),P=a=>{a.code==500?(d.value=a.data.url,console.log("11111",d.value),console.log("22222",a.data.url),c.success(a.message)):c.error(a.message||"上传失败")},R=a=>{const t=a.size/1024/1024<2;return t||c.error("Avatar picture size can not exceed 2MB!"),t},p=()=>{let a={url:f.value,size:w.size,page:w.page};q(a).then(t=>{console.log(t.data.data),D.value=t.data.data.projects,A.value=t.data.data.count})},j=a=>{w.size=a,p()},N=a=>{w.page=a,p()},S=(a,t,g)=>{a=="add"?(y.value="add",d.value="",r.value=!0,s.value={image:"",name:"",url:""},C.value="新增平台"):a=="delete"?K(g).then(u=>{u.data.code==200?(c.success(u.data.message),p()):c.error(u.data.message)}):a=="edit"&&(s.value=g,d.value=g.image,y.value="edit",r.value=!0,C.value="修改平台")},E=()=>{if(!s.value.name||!s.value.url){c.error("请填写完整信息！");return}if(y.value=="add"){let a=JSON.parse(JSON.stringify(s.value));a.image=d.value,Q(a).then(t=>{t.data.code==200?(c.success(t.data.message),p(),s.image="",d.value=""):(c.error(t.data.message),p(),s.image="",d.value="")})}else if(y.value=="edit"){let a=JSON.parse(JSON.stringify(s.value));a.image=d.value,X(a).then(t=>{t.data.code==200?(c.success(t.data.message),p(),a.image="",d.value=""):(c.error(t.data.message),p(),a.image="",d.value="")})}r.value=!1};return ae(()=>{p()}),(a,t)=>{const g=n("el-input"),u=n("el-button"),B=n("Plus"),b=n("el-icon"),F=n("el-avatar"),x=n("el-table-column"),U=n("EditPen"),L=n("Delete"),H=n("el-table"),J=n("el-pagination"),M=n("el-divider"),$=n("el-upload"),V=n("el-form-item"),T=n("el-form"),W=n("el-dialog");return k(),I("div",de,[_("div",ie,[re,_("div",null,[e(g,{modelValue:i(f),"onUpdate:modelValue":t[0]||(t[0]=o=>z(f)?f.value=o:f=o),class:"selectwidth"},null,8,["modelValue"])]),v("     "),e(u,{type:"primary",onClick:p},{default:l(()=>[v("查询")]),_:1}),_("div",ue,[e(u,{type:"primary",onClick:t[1]||(t[1]=o=>S("add"))},{default:l(()=>[e(b,null,{default:l(()=>[e(B)]),_:1}),v("新增平台")]),_:1})])]),_("div",ce,[e(H,{data:i(D),style:{height:"94%"},"header-cell-class-name":"table_header","row-style":{fontSize:"14px",height:"10px"},"cell-style":{padding:"14px",height:"30px"}},{default:l(()=>[e(x,{label:"LOGO",align:"center",width:"width"},{default:l(o=>[e(F,{size:50,src:o.row.image},null,8,["src"])]),_:1}),e(x,{label:"平台名称",align:"center",width:"width",prop:"name"}),e(x,{label:"端口号",align:"center",width:"width",prop:"url"}),e(x,{label:"操作",align:"center",width:"width"},{default:l(o=>[_("div",pe,[e(u,{text:"",type:"primary",style:{width:"130"},onClick:G=>S("edit",o.$index,o.row)},{default:l(()=>[e(b,null,{default:l(()=>[e(U)]),_:1}),v("编辑")]),_:2},1032,["onClick"]),e(u,{text:"",type:"primary",style:{width:"130"},onClick:G=>S("delete",o.$index,o.row)},{default:l(()=>[e(b,null,{default:l(()=>[e(L)]),_:1}),v("删除")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),_("div",me,[e(J,{"page-size":10,background:"",layout:"total, prev, pager, next, jumper",total:i(A),onSizeChange:j,onCurrentChange:N},null,8,["total"])])]),e(W,{modelValue:i(r),"onUpdate:modelValue":t[5]||(t[5]=o=>z(r)?r.value=o:r=o),title:i(C),width:"25%","align-center":"",style:{height:"500px"}},{footer:l(()=>[_("span",ge,[e(u,{onClick:t[4]||(t[4]=o=>z(r)?r.value=!1:r=!1)},{default:l(()=>[v("取消")]),_:1}),e(u,{type:"primary",onClick:E},{default:l(()=>[v(" 确认 ")]),_:1})])]),default:l(()=>[e(M),e(T,{"label-width":"100px",model:i(s),style:{"max-width":"700px"}},{default:l(()=>[e(V,{label:"LOGO",prop:"image"},{default:l(()=>[e($,{class:"avatar-uploader btp",action:"http://1.13.163.6:8091/image/upload","show-file-list":!1,headers:O.value,"on-success":P,"before-upload":R,name:"image"},{default:l(()=>[i(d)?(k(),I("img",{key:0,src:i(d),class:"avatar"},null,8,_e)):(k(),le(b,{key:1,class:"avatar-uploader-icon"},{default:l(()=>[e(B)]),_:1}))]),_:1},8,["headers"])]),_:1}),e(V,{label:"平台名称",prop:"name"},{default:l(()=>[e(g,{modelValue:i(s).name,"onUpdate:modelValue":t[2]||(t[2]=o=>i(s).name=o),style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(V,{label:"端口号",prop:"url"},{default:l(()=>[e(g,{modelValue:i(s).url,"onUpdate:modelValue":t[3]||(t[3]=o=>i(s).url=o),style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},xe=Z(ve,[["__scopeId","data-v-210887d0"]]);export{xe as default};
